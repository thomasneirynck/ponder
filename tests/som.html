<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../bower_components/requirejs/require.js"></script>
    <style>
        html, body {
            margin: 0 auto;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>


<canvas width="1000" height="1000" id="som" style=" width: 100%; height: 100%"></canvas>


<script>

    require({
                baseUrl: "..",
                paths: {
                    'ponder': 'src',
                    'type': "bower_components/type/type"
                }
            },
            ["ponder/SOM"], function (SOM) {

                var width = 10;
                var height = 10;
                var som = new SOM({
                    width: width,
                    height: height,
                    codeBookSize: 3
                });

                var data = [
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,
                    1, 0, 0,
                    0, 1, 0,
                    0, 1, 1,
                    1, 1, 0,
                    0, 0, 1,
                    1, 1, 0,
                    1, 1, 1,
                    0, 0, 0,
                    1, 0.5, 0.5,

                ];


                var context2d = document.getElementById("som").getContext("2d");
                context2d.canvas.width = document.body.clientWidth;
                context2d.canvas.height = document.body.clientHeight;

                var buffer = document.createElement("canvas").getContext("2d");
                buffer.canvas.width = width;
                buffer.canvas.height = height;

                var bufferImageData = buffer.getImageData(0, 0, buffer.canvas.width, buffer.canvas.height);

                function fillPixel(weights, wi, pixel, pixeli) {
                    pixel[pixeli] = Math.round(weights[wi] * 255);
                    pixel[pixeli + 1] = Math.round(weights[wi + 1] * 255);
                    pixel[pixeli + 2] = Math.round(weights[wi + 2] * 255);
                    pixel[pixeli + 3] = 255;
                }

                som.trainMapInterval(data, function () {
                    som.fill2dImageData(bufferImageData, fillPixel);
                    buffer.putImageData(bufferImageData, 0, 0);
                    context2d.drawImage(buffer.canvas, 0, 0, context2d.canvas.width, context2d.canvas.height);

                    var bmu = 0;
                    for (var i = 0; i < data.length; i += 3) {

                    }
                });


            });


</script>


</body>
</html>